<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
    <title>Programming Ruby: The Pragmatic Programmer's Guide</title>
    <link rel="StyleSheet" href="pr_style.css" type="text/css" media="screen">
  </head>
  <body bgcolor="white">
    <table bgcolor="#c09090" cellpadding="3" border="0" cellspacing="0" width="100%">
      <tr>
        <td colspan="3">
          <table bgcolor="#701a1a" cellpadding="20" width="100%">
            <tr>
              <td width="6in">
                <h1 class="header">Programming Ruby</h1>
                <h3 class="subheader">The Pragmatic Programmer's Guide</h3>
              </td>
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td width="33%" align="left">
          <a class="pickaxe/subheader" href="ref_c_object.html">Previous &lt;</a>
        </td>
        <td width="33%" align="center" valign="middle">
          <a class="pickaxe/subheader" href="builtins.html">Contents ^</a>
          <br>
        </td>
        <td width="33%" align="right">
          <a class="pickaxe/subheader" href="ref_c_range.html">Next &gt;</a>
          <br>
        </td>
      </tr>
    </table>
<!--
Copyright (c) 2001 by Addison Wesley Longman, Inc. This material may
be distributed only subject to the terms and conditions set forth in
the Open Publication License, v1.0 or later (the latest version is
presently available at http://www.opencontent.org/openpub/).
<P></P>
Distribution of substantively modified versions of this document is
prohibited without the explicit permission of the copyright holder.
<P></P>
Distribution of the work or derivative of the work in any standard
(paper) book form is prohibited unless prior permission is obtained
from the copyright holder.
-->
<table>
      <tr>
        <td height="20"><img src="dot.gif" width="1" height="20"></td>
      </tr>
    </table>
    <table border="0" width="100%" bgcolor="660066" cellpadding="10">
      <tr>
        <td valign="center">
          <font color="white" size="7">class Proc</font>
        </td>
        <td>
          <table border="0">
            <tr>
              <td>
                <font color="white">
                Parent:
              </font>
              </td>
              <td>
                <font color="white">Object</font>
              </td>
            </tr>
            <tr>
              <td>
                <font color="white">
                Version:
              </font>
              </td>
              <td>
                <font color="white">
               1.6
              </font>
              </td>
            </tr>
          </table>
        </td>
      </tr>
    </table>
    <p></p>
    <H3>Index:</H3>
    <a href="#Proc.new">new</a> 
     <i>
      <a href="#Proc._ob_cb">[ ]</a>
    </i> <i>
      <a href="#Proc.arity">arity</a>
    </i> <i>
      <a href="#Proc.call">call</a>
    </i> <p></p>
    <hr>
<P></P>
  <code>Proc</code> objects are blocks of code that have been bound to a set
  of local variables. Once bound, the code may be called in different
  contexts and still access those variables.
<P></P>

<table class="codebox" cellspacing="0" border="0" cellpadding="3" width="500">
<tr>
<td colspan="3" valign="top">
          <code>def&nbsp;genTimes(factor)</code>
        </td>
</tr>
<tr>
<td colspan="3" valign="top">
          <code>&nbsp;&nbsp;return&nbsp;Proc.new&nbsp;{|n|&nbsp;n*factor&nbsp;}</code>
        </td>
</tr>
<tr>
<td colspan="3" valign="top">
          <code>end</code>
        </td>
</tr>
<tr>
<td colspan="3" valign="top">
          <code></code>
        </td>
</tr>
<tr>
<td colspan="3" valign="top">
          <code>times3&nbsp;=&nbsp;genTimes(3)</code>
        </td>
</tr>
<tr>
<td colspan="3" valign="top">
          <code>times5&nbsp;=&nbsp;genTimes(5)</code>
        </td>
</tr>
<tr>
<td colspan="3" valign="top">
          <code></code>
        </td>
</tr>
<tr>
  <td valign="top">
          <code>times3.call(12)</code>
        </td>
  <td valign="top"></td>
  <td valign="top">
          <code>36</code>
        </td>
</tr>
<tr>
  <td valign="top">
          <code>times5.call(5)</code>
        </td>
  <td valign="top"></td>
  <td valign="top">
          <code>25</code>
        </td>
</tr>
<tr>
  <td valign="top">
          <code>times3.call(times5.call(4))</code>
        </td>
  <td valign="top"></td>
  <td valign="top">
          <code>60</code>
        </td>
</tr>
</table>
<P></P>

<P></P>
  <table border="0" width="100%" cellpadding="10">
      <tr>
        <td valign="center" colspan="2" bgcolor="990066">
          <font color="white" size="6">class methods
       </font>
        </td>
      </tr>
      <tr>
        <td valign="center" bgcolor="#ff9999">
          <font size="4">
            <b>
              <a name="Proc.new">new</a>
            </b>
          </font>
        </td>
        <td bgcolor="#ffaaaa">
        Proc.new <i>[</i>{|  | block }
<i>]</i>
        -&gt; <i>aProc</i>
      </td>
      </tr>
      <td></td>
      <td>
<P></P>
      Creates a new <code>Proc</code> object, bound to the current context. It
      may be called without a block only within a method with an
      attached block, in which case that block is converted to the
      <code>Proc</code> object.
<P></P>

<table class="codebox" cellspacing="0" border="0" cellpadding="3" width="500">
<tr>
<td colspan="3" valign="top">
              <code>def&nbsp;procFrom</code>
            </td>
</tr>
<tr>
<td colspan="3" valign="top">
              <code>&nbsp;&nbsp;Proc.new</code>
            </td>
</tr>
<tr>
<td colspan="3" valign="top">
              <code>end</code>
            </td>
</tr>
<tr>
<td colspan="3" valign="top">
              <code>aProc&nbsp;=&nbsp;procFrom&nbsp;{&nbsp;"hello"&nbsp;}</code>
            </td>
</tr>
<tr>
  <td valign="top">
              <code>aProc.call</code>
            </td>
  <td valign="top"></td>
  <td valign="top">
              <code>"hello"</code>
            </td>
</tr>
</table>
<P></P>

<P></P>
      </td>
    </table>
<P></P>
  <table border="0" width="100%" cellpadding="10">
      <tr>
        <td valign="center" colspan="2" bgcolor="990066">
          <font color="white" size="6">instance methods
       </font>
        </td>
      </tr>
      <tr>
        <td valign="center" bgcolor="#ff9999">
          <font size="4">
            <b>
              <a name="Proc._ob_cb">[ ]</a>
            </b>
          </font>
        </td>
        <td bgcolor="#ffaaaa">
        <i>prc</i>[ <i>[</i>
          <i>params</i>
          <i>]<sup>*</sup>
          </i> ]
        -&gt; <i>anObject</i>
      </td>
      </tr>
      <td></td>
      <td>
<P></P>
      Synonym for <code>Proc.call</code>.
<P></P>
      </td>
      <tr>
        <td valign="center" bgcolor="#ff9999">
          <font size="4">
            <b>
              <a name="Proc.arity">arity</a>
            </b>
          </font>
        </td>
        <td bgcolor="#ffaaaa">
        <i>prc</i>.arity -&gt; <i>anInteger</i>
      </td>
      </tr>
      <td></td>
      <td>
<P></P>
      Returns the number of arguments required by the block. If the
      block takes no arguments, returns -1. If it takes one argument,
      returns -2. Otherwise, returns a positive argument count unless
      the last argument is prefixed with *, in which case the argument 
      count is negated. The number of required arguments is
      <i>anInteger</i> for positive values, and 
      <code>(</code>
        <i>anInteger</i>
        <code>+1).abs</code> otherwise.
<P></P>

<table class="codebox" cellspacing="0" border="0" cellpadding="3" width="500">
<tr>
  <td valign="top">
              <code>Proc.new&nbsp;{||}.arity</code>
            </td>
  <td valign="top"></td>
  <td valign="top">
              <code>0</code>
            </td>
</tr>
<tr>
  <td valign="top">
              <code>Proc.new&nbsp;{|a|}.arity</code>
            </td>
  <td valign="top"></td>
  <td valign="top">
              <code>-1</code>
            </td>
</tr>
<tr>
  <td valign="top">
              <code>Proc.new&nbsp;{|a,b|}.arity</code>
            </td>
  <td valign="top"></td>
  <td valign="top">
              <code>2</code>
            </td>
</tr>
<tr>
  <td valign="top">
              <code>Proc.new&nbsp;{|a,b,c|}.arity</code>
            </td>
  <td valign="top"></td>
  <td valign="top">
              <code>3</code>
            </td>
</tr>
<tr>
  <td valign="top">
              <code>Proc.new&nbsp;{|*a|}.arity</code>
            </td>
  <td valign="top"></td>
  <td valign="top">
              <code>-1</code>
            </td>
</tr>
<tr>
  <td valign="top">
              <code>Proc.new&nbsp;{|a,*b|}.arity</code>
            </td>
  <td valign="top"></td>
  <td valign="top">
              <code>-2</code>
            </td>
</tr>
</table>
<P></P>

<P></P>
      </td>
      <tr>
        <td valign="center" bgcolor="#ff9999">
          <font size="4">
            <b>
              <a name="Proc.call">call</a>
            </b>
          </font>
        </td>
        <td bgcolor="#ffaaaa">
        <i>prc</i>.call( <i>[</i>
          <i>params</i>
          <i>]<sup>*</sup>
          </i> )
        -&gt; <i>anObject</i>
      </td>
      </tr>
      <td></td>
      <td>
<P></P>
      Invokes the block, setting the block's parameters to the values
      in <i>params</i> using the same rules as used by parallel
      assignment. Returns the value of the last expression evaluated
      in the block.
<P></P>

<table class="codebox" cellspacing="0" border="0" cellpadding="3" width="500">
<tr>
<td colspan="3" valign="top">
              <code>aProc&nbsp;=&nbsp;Proc.new&nbsp;{|a,&nbsp;*b|&nbsp;b.collect&nbsp;{|i|&nbsp;i*a&nbsp;}}</code>
            </td>
</tr>
<tr>
  <td valign="top">
              <code>aProc.call(9,&nbsp;1,&nbsp;2,&nbsp;3)</code>
            </td>
  <td valign="top"></td>
  <td valign="top">
              <code>[9,&nbsp;18,&nbsp;27]</code>
            </td>
</tr>
<tr>
  <td valign="top">
              <code>aProc[9,&nbsp;1,&nbsp;2,&nbsp;3]</code>
            </td>
  <td valign="top"></td>
  <td valign="top">
              <code>[9,&nbsp;18,&nbsp;27]</code>
            </td>
</tr>
</table>
<P></P>

<P></P>
      </td>
    </table>
<P></P>

<p></p>
    <hr>
    <table bgcolor="#a03030" cellpadding="10" border="0" cellspacing="0">
      <tr>
        <td width="33%" align="left">
          <a class="pickaxe/subheader" href="ref_c_object.html">Previous &lt;</a>
        </td>
        <td width="33%" align="center" valign="middle">
          <a class="pickaxe/subheader" href="builtins.html">Contents ^</a>
          <br>
        </td>
        <td width="33%" align="right">
          <a class="pickaxe/subheader" href="ref_c_range.html">Next &gt;</a>
          <br>
        </td>
      </tr>
    </table>
    <p></p>
    <font size="-1">Extracted from the book "Programming Ruby -
     The Pragmatic Programmer's Guide"</font>
    <br>
    <font size="-3">
      Copyright
      &#169;
2001 by Addison Wesley Longman, Inc. This material may
be distributed only subject to the terms and conditions set forth in
the Open Publication License, v1.0 or later (the latest version is
presently available at
      <a href="http://www.opencontent.org/openpub/">http://www.opencontent.org/openpub/</a>)).
        <p></p>
Distribution of substantively modified versions of this document is
prohibited without the explicit permission of the copyright holder.
          <p></p>
Distribution of the work or derivative of the work in any standard
(paper) book form is prohibited unless prior permission is obtained
from the copyright holder.
        <br>
    </font>
  </body>
</html>